#summary LISPBUILDER-SDL Windows SBCL installation
#sidebar TableOfContents

<wiki:toc max_depth="3" />

= Overview =

This section describes the installation and configuration of SBCL and LISPBUILDER-SDL for Windows. Installation of Emacs is not covered.

A summary of the process is as follows;

 * Create a directory structure
 * Install SBCL
 * Install CFFI & CFFI dependencies
 * Install LISPBUILDER-SDL & dependencies
 * Create the SBCL sbclrc file
 * Create a SBCL startup batch file
 * Optionally install rlwrap

= Directory Structure =

Create the following directories in the root directory:

{{{
C:\sblc\
C:\sbcl\site\
}}}

= SBCL =

Download [http://www.sbcl.org/ SBCL] for Windows;

 * [http://www.sbcl.org/platform-table.html Latest version of SBCL for Win32]

Install [http://www.sbcl.org/ SBCL] to the following directory;

{{{
C:\sblc\
}}}

= CFFI =

Download the latest version of [http://common-lisp.net/project/cffi/ CFFI];

 * [http://common-lisp.net/project/cffi/tarballs/?M=D CFFI]

The latest version of [http://common-lisp.net/project/cffi/ CFFI] has three dependencies that must also be downloaded;

 * [http://www.cliki.net/Alexandria ALEXANDRIA]
 * [http://www.cliki.net/Babel BABEL]
 * [http://www.cliki.net/trivial-features TRIVIAL-FEATURES]

Extract these packages to the following directories;

{{{
C:\sbcl\site\cffi\
C:\sbcl\site\alexandria\
C:\sbcl\site\babel\
C:\sbcl\site\trivial-features\
}}}

= LISPBUILDER-SDL & Binaries =

 * SVN, or PACKAGE

Download `LISPBUILDER-SDL` from *source*, or *downloads* above. Install to;

{{{
C:\sbcl\site\lispbuilder-sdl\
}}}

Download the required SDL binaries;

 * _win32-lispbuilder-sdl-binaries.tgz_ from *source*, or *downloads* above, or
 * SDL from packaged libraries, or the [www.libsdl.org official site]

Install to the following directory;

{{{
C:\sbcl\site\lispbuilder-sdl\
}}}

= sbclrc =

Create a new `sbclrc` file in; 

{{{
C:\sbcl\
}}}

Add the following to the `sbclrc` file above;

{{{
(require :asdf)
 
;;load cffi
(pushnew "C:\\sbcl\\site\\trivial-features\\" asdf:*central-registry* :test 'equal)  
(pushnew "C:\\sbcl\\site\\alexandria\\" asdf:*central-registry* :test 'equal)    
(pushnew "C:\\sbcl\\site\\babel\\" asdf:*central-registry* :test 'equal)     
(pushnew "C:\\sbcl\\site\\cffi\\" asdf:*central-registry* :test 'equal)     
(asdf:operate 'asdf:load-op :cffi)
 
;; load lispbuilder-sdl
(pushnew "C:\\sbcl\\site\\lispbuilder-sdl\\" asdf:*central-registry* :test 'equal)
(asdf:operate 'asdf:load-op :lispbuilder-sdl)
(asdf:operate 'asdf:load-op :lispbuilder-sdl-binaries)
}}}

= Starting SBCL =

{{{
sbcl --sysinit "C:\sbcl\sbclrc"
}}}

= rlwrap =

[http://utopia.knoware.nl/~hlub/uck/rlwrap/ rlwrap] is a readline wrapper, that makes using SBCL from the REPL somewhat bearable. It requires installing [http://www.cygwin.com/ cygwin] and selecting the rlwrap package.

{{{
> rlwrap sbcl --sysinit "C:\sbcl\sbclrc"
}}}