#summary LISPBUILDER-SDL Windows SBCL installation
#sidebar TableOfContents

= Overview =

This section describes the installation and configuration of SBCL and LISPBUILDER-SDL for Windows. Installation of Emacs is not covered.

A summary of the process is as follows;

<wiki:toc max_depth="3" />

= Install  SBCL =

Download [http://www.sbcl.org/ SBCL] for Windows;

 * [http://www.sbcl.org/platform-table.html Latest version of SBCL for various operating systems (including Windows)]

Install SBCL to the default directory; from now on this directory will be denoted as:

{{{
[SBCL_HOME]
}}}

Note: Here, `[SBCL_HOME]` means to insert the installation directory (e.g. "C:\Program Files\Steel Bank Common Lisp\X.Y.Z\"), not the literal text "`[SBCL_HOME]`".

Wherever you put SBCL, it is important to set the environment variables SBCL_HOME and PATH. Fortunately, the installer automatically does this for SBCL_HOME. Unfortunately, the installer _doesn't_ do this for PATH, so you'll need to do that yourself. Searching ([http://www.google.com/search?hl=en&q=windows+set+PATH+variable&btnG=Search google]) should provide instructions on how to change PATH. (Add "Vista" to the search terms if you use Vista, since Vista has its own way of doing things.)

Also note that in order for these changes to take effect, you may need to restart your computer.

= Install CFFI and Dependencies =

Download the latest version of [http://common-lisp.net/project/cffi/ CFFI];

 * [http://common-lisp.net/project/cffi/tarballs/?M=D CFFI]

The latest version of CFFI has three dependencies that must also be downloaded;

 * [http://www.cliki.net/Alexandria ALEXANDRIA]
 * [http://www.cliki.net/Babel BABEL]
 * [http://www.cliki.net/trivial-features TRIVIAL-FEATURES]

Extract these packages to the following directories;

{{{
[SBCL_HOME]\site\cffi\
[SBCL_HOME]\site\alexandria\
[SBCL_HOME]\site\babel\
[SBCL_HOME]\site\trivial-features\
}}}

= Install LISPBUILDER-SDL and Binaries =

 * SVN, or PACKAGE

Download `LISPBUILDER-SDL` from *source*, or *downloads* above. Install to;

{{{
[SBCL_HOME]\site\lispbuilder-sdl\
}}}

Download the required SDL binaries;

 * _win32-lispbuilder-sdl-binaries.tgz_ from *source*, or *downloads* above, or
 * SDL from packaged libraries, or the [www.libsdl.org official site]

Install to the following directory;

{{{
[SBCL_HOME]\site\lispbuilder-sdl\
}}}

= Create an SBCL System Initialization File =

Create a new `sbclrc` file; 

{{{
[SBCL_HOME]\sbclrc
}}}

Add the following to the `sbclrc` file above;

{{{
(require :asdf)

;; put all subdirectories of SBCL_HOME\site\ into asdf:*central-registry*
(pushnew "[SBCL_HOME]\\site\\*\\" asdf:*central-registry* :test 'equal)
 
;; load lispbuilder-sdl
(asdf:operate 'asdf:load-op :lispbuilder-sdl)
(asdf:operate 'asdf:load-op :lispbuilder-sdl-binaries)
}}}

Note that you'll have to double up the backslashes in `[SBCL_HOME]` to avoid confusing SBCL.

= Starting SBCL =

Assuming PATH and SBCL_HOME are set correctly,

{{{
> sbcl
}}}