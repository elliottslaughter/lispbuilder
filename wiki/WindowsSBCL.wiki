#summary LISPBUILDER-SDL Windows SBCL installation
#sidebar TableOfContents

<wiki:toc max_depth="3" />

= Overview =

This page describes the installation and configuration of SBCL and LISPBUILDER-SDL for Windows.

= Install  SBCL =

Download [http://www.sbcl.org/ SBCL] for Windows;

 * [http://www.sbcl.org/platform-table.html SBCL binaries for various OSes (including Windows)]

Install SBCL to the default directory; from now on this directory will be denoted as:

{{{
[SBCL]
}}}

Note: Here, `[SBCL]` means to insert the installation directory (e.g. "C:\Program Files\Steel Bank Common Lisp\X.Y.Z\"), not the literal text "`[SBCL]`".

= Install CFFI and Dependencies =

Download the latest version of [http://common-lisp.net/project/cffi/ CFFI];

 * [http://common-lisp.net/project/cffi/releases/?M=D Official release tarballs]

The latest version of CFFI has three dependencies that must also be downloaded;

 * [http://www.cliki.net/Alexandria ALEXANDRIA]
 * [http://www.cliki.net/Babel BABEL]
 * [http://www.cliki.net/trivial-features TRIVIAL-FEATURES]

Extract these packages to the following directories;

{{{
[SBCL]\site\cffi\
[SBCL]\site\alexandria\
[SBCL]\site\babel\
[SBCL]\site\trivial-features\
}}}

If you do not already have a program which can extract tar.gz files (necessary for extracting the above packages), [http://www.7-zip.org/ 7-Zip] is a good option.

= Install LISPBUILDER-SDL and Binaries =

Download `LISPBUILDER-SDL` from [http://code.google.com/p/lispbuilder/source/checkout source] (requires SVN), or [http://code.google.com/p/lispbuilder/downloads/list downloads] above. Install to;

{{{
[SBCL]\site\lispbuilder-sdl\
}}}

Download the required SDL binaries;

 * _win32-lispbuilder-sdl-binaries.tgz_ from [http://code.google.com/p/lispbuilder/downloads/list downloads] above, or
 * SDL from the [http://www.libsdl.org official site] or another package

Install to the following directory;

{{{
[SBCL]\site\lispbuilder-sdl\
}}}

= Create an SBCL System Initialization File =

Create a new `sbclrc` file; 

{{{
[SBCL]\sbclrc
}}}

Add the following to the `sbclrc` file above;

{{{
(require :asdf)

;; put all subdirectories of [SBCL]\site\ into asdf:*central-registry*
(dolist (dir (directory "[SBCL]\\site\\*\\"))
  (pushnew dir asdf:*central-registry* :test #'equal))
 
;; load lispbuilder-sdl
(asdf:operate 'asdf:load-op :lispbuilder-sdl)
(asdf:operate 'asdf:load-op :lispbuilder-sdl-binaries)
}}}

Note that you'll have to double up the backslashes in `[SBCL_HOME]` to avoid confusing SBCL.

= Try the Examples =

To make sure your configuration works, start SBCL and try one of the examples;

{{{
> sbcl
This is SBCL X.Y.Z, an implementation of ANSI Common Lisp.
...

* (asdf:operate 'asdf:load-op :lispbuilder-sdl-examples)
...

* (sdl-examples:mandelbrot)
}}}

= Emacs and SLIME =

If you don't already have an editor you use for Lisp code, [http://www.gnu.org/software/emacs/ Emacs] and [http://common-lisp.net/project/slime/ SLIME] are a good combination.

Note: There is a bug in the current version of SBCL (1.0.22 as of the time of writing) which causes SLIME to misbehave. A description of the problem, and a workaround, can be found in the [http://article.gmane.org/gmane.lisp.slime.devel/7991 slime-devel archives].